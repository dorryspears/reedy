# Progress Log

## 2026-01-12

### Fixed: Medium Bug #6 - Duplicate Code Between `app.rs` and `rss_manager.rs`

**Location:** `src/rss_manager.rs`

**Problem:** The file `rss_manager.rs` contained 629 lines of dead code that duplicated nearly identical implementations found in `app.rs`. This included `FeedItem`, `SavedState`, `CachedFeed` structs, and many feed management methods. The module was declared in both `main.rs` and `lib.rs` but never actually imported or used anywhere in the codebase.

**Solution:**
1. Deleted the entire `src/rss_manager.rs` file (629 lines of dead code)
2. Removed the `pub mod rss_manager;` declaration from `src/main.rs`
3. Removed the `pub mod rss_manager;` declaration from `src/lib.rs`

**Files changed:**
- `src/rss_manager.rs` - Deleted
- `src/main.rs` - Removed `rss_manager` module declaration
- `src/lib.rs` - Removed `rss_manager` module declaration

**Tests:** All tests pass (16 total: 11 app tests, 5 ui tests)

---

### Fixed: High Bug #5 - Favorites View Not Updated on Unfavorite

**Location:** `src/app.rs:866-893`

**Problem:** When unfavoriting an item while in Favorites view, the item remained visible until the user manually refreshed or toggled the view. This was confusing UX.

**Solution:**
1. Modified `toggle_favorite()` to track whether the item was a favorite before toggling
2. After unfavoriting, if in Favorites view (`PageMode::Favorites`), the item is immediately removed from `current_feed_content`
3. The `selected_index` is adjusted appropriately:
   - If the list becomes empty, `selected_index` is set to `None`
   - If the removed item was at the end, `selected_index` moves to the new last item
   - Otherwise, `selected_index` stays the same (now pointing to the next item)

**Files changed:**
- `src/app.rs` - Modified `toggle_favorite()` to remove unfavorited items from view in Favorites mode
- `tests/app_tests.rs` - Added 3 new tests:
  - `test_unfavorite_removes_from_favorites_view` - verifies item removal and index adjustment
  - `test_unfavorite_last_item_in_favorites_view` - verifies empty list handling
  - `test_unfavorite_does_not_remove_in_feedlist_view` - verifies behavior unchanged in normal view

**Tests:** All tests pass (16 total: 11 app tests, 5 ui tests)

---

### Fixed: High Bug #4 - No HTTP Request Timeouts

**Location:** `src/app.rs` - multiple locations using `reqwest::get()`

**Problem:** All HTTP requests using `reqwest::get()` lacked timeout configuration. When a feed server was slow or unresponsive, the application would hang indefinitely waiting for a response.

**Solution:**
1. Added a `create_http_client()` helper function that creates a `reqwest::Client` with a 30-second timeout
2. Replaced all bare `reqwest::get()` calls with client-based requests using the new helper
3. Added `Duration` to the imports for timeout configuration

**Files changed:**
- `src/app.rs` - Added `create_http_client()` function and updated 5 locations:
  - `is_valid_rss_feed()`
  - `load_feed_content()`
  - `cache_all_feeds()`
  - `refresh_all_feeds()`
  - `fetch_feed()`

**Tests:** All tests pass (13 total: 8 app tests, 5 ui tests)

### Fixed: High Bug #3 - Cache Cleared on Every Startup

**Location:** `src/app.rs:103`

**Problem:** `clear_cache_dir()` was called unconditionally in `App::new()` on every startup, which deleted all cached feed data. This defeated the purpose of caching for offline reading and forced users to wait for feeds to reload every time.

**Solution:** Removed the `clear_cache_dir()` call from `App::new()`. The existing cache system already has proper 1-hour TTL expiration logic in `load_feed_cache()`, making the startup cache clear unnecessary. Also removed the now-unused `clear_cache_dir()` function to avoid dead code.

**Files changed:**
- `src/app.rs` - Removed `clear_cache_dir()` call from `App::new()` and removed the unused `clear_cache_dir()` function

**Tests:** All tests pass (13 total: 8 app tests, 5 ui tests)

### Fixed: Critical Bug #2 - Integer Underflow in `truncate_text`

**Location:** `src/ui.rs:346-361`

**Problem:** When `max_width < 3`, the subtraction `(max_width - 3) as usize` would cause integer underflow, leading to potential panic or unexpected behavior when the terminal is very narrow.

**Solution:** Added an early return guard at the beginning of `truncate_text()` that checks if `max_width < 3`. When true, it returns the text truncated to `max_width` characters without attempting to add ellipsis.

**Files changed:**
- `src/ui.rs` - Added guard for small width values
- `tests/ui_tests.rs` - Added test `test_truncate_text_very_small_width` covering edge cases for width 0, 1, 2, and 3

**Tests:** All tests pass (8 total: 4 app tests, 5 ui tests including new edge case test)

### Fixed: Critical Bug #1 - Panic on Empty List Navigation

**Location:** `src/app.rs:285`, `src/app.rs:296`

**Problem:** `select_previous()` and `select_next()` could panic when navigating an empty list:
- `(current + 1) % len` causes division by zero when `len == 0`
- `len - 1` causes integer underflow when `len == 0`

**Solution:** Added early return guard `if len == 0 { return; }` in both `select_previous()` and `select_next()` functions before any arithmetic operations on `len`.

**Files changed:**
- `src/app.rs` - Added empty list guard in `select_previous()` and `select_next()`
- `tests/app_tests.rs` - Added 4 new tests covering empty list navigation edge cases:
  - `test_select_next_empty_list`
  - `test_select_previous_empty_list`
  - `test_select_next_empty_feed_manager`
  - `test_select_previous_empty_feed_manager`

**Tests:** All tests pass (13 total: 8 app tests, 5 ui tests)

---

### Fixed: Medium Bug #7 - Module Double Declaration

**Location:** `src/main.rs:18-22`

**Problem:** Modules (`app`, `event`, `handler`, `tui`, `ui`) were declared in both `main.rs` and `lib.rs`. This created confusion about which module was being used and potential compilation issues. The `main.rs` was already importing from `reedy::` (the lib crate) but then redundantly re-declared the same modules.

**Solution:**
1. Removed the duplicate module declarations from `src/main.rs` (lines 18-22)
2. The modules remain properly declared in `lib.rs` and are accessed via the `reedy` crate import

**Files changed:**
- `src/main.rs` - Removed 5 redundant `pub mod` declarations

**Tests:** All tests pass (16 total: 11 app tests, 5 ui tests)

---

### Fixed: Medium Bug #8 - Hardcoded Page Sizes

**Location:** `src/app.rs:324-327`, `src/app.rs:613-616`

**Problem:** Page sizes for scrolling were hardcoded to 5 items for FeedList/Favorites and 10 items for FeedManager. This meant pagination didn't adapt to the actual terminal height, causing items to overflow or underflow the visible area.

**Solution:**
1. Added a new `items_per_page()` method that dynamically calculates the number of visible items based on:
   - Terminal height (accounting for 8 lines of UI chrome: 3 title + 3 command bar + 2 borders)
   - Page mode (FeedList/Favorites use 3 lines per item, FeedManager uses 1 line per item)
2. Updated `ensure_selection_visible()` to use `items_per_page()` instead of hardcoded values
3. Updated `page_up()` to use `items_per_page()` instead of hardcoded values
4. Updated `page_down()` to use `items_per_page()` and also fixed it to work correctly in FeedManager mode

**Files changed:**
- `src/app.rs` - Added `items_per_page()` method, updated `ensure_selection_visible()`, `page_up()`, and `page_down()`
- `tests/app_tests.rs` - Added `test_items_per_page_dynamic_calculation` to verify the calculation works correctly for different terminal heights and page modes

**Tests:** All tests pass (17 total: 12 app tests, 5 ui tests)

---

### Fixed: Medium Bug #9 - Blocking Async Patterns

**Location:** `src/app.rs:113-130`, `src/app.rs:885-902`, `src/handler.rs:60-67`, `src/handler.rs:96-100`

**Problem:** The codebase used `tokio::task::block_in_place` with `tokio::runtime::Handle::current().block_on()` to run async code in several places:
1. `App::new()` - blocked during initialization to refresh and cache feeds
2. `toggle_favorites_page()` - blocked when switching from favorites back to feed list
3. `handler.rs` - blocked in the 'c' key handlers for refreshing/caching feeds

This pattern is inefficient and can cause deadlocks in certain scenarios because it blocks the current thread waiting for async operations, defeating the purpose of async programming.

**Solution:**
1. Converted `App::new()` from sync to async - now called with `.await` in main.rs
2. Converted `toggle_favorites_page()` from sync to async - now called with `.await` in handler.rs
3. Removed all `block_in_place` and `block_on` calls from handler.rs - the handler is already async, so async methods can be awaited directly
4. Updated `main.rs` to await the async `App::new()` call

**Files changed:**
- `src/app.rs` - Made `App::new()` and `toggle_favorites_page()` async, removed blocking wrappers
- `src/handler.rs` - Removed `block_in_place`/`block_on` wrappers, now directly awaits async methods
- `src/main.rs` - Updated to await `App::new()`

**Tests:** All tests pass (17 total: 12 app tests, 5 ui tests)

---

### Fixed: Low Bug #10 - Debug Statement Left in Code

**Location:** `src/app.rs:436` (was `src/app.rs:413` before previous fixes shifted line numbers)

**Problem:** A leftover debug statement `debug!("test");` existed in the `select_feed()` function that served no purpose. This was likely left behind during development and cluttered the debug output.

**Solution:** Removed the useless `debug!("test");` statement. The function already has a proper debug statement on the next line that logs meaningful context: `debug!("Loading feed content from index {}", index);`

**Files changed:**
- `src/app.rs` - Removed `debug!("test");` from `select_feed()` function

**Tests:** All tests pass (17 total: 12 app tests, 5 ui tests)

---

### Implemented: High Priority Feature #1 - Search/Filter Functionality

**Location:** `src/app.rs`, `src/handler.rs`, `src/ui.rs`

**Description:** Added the ability to filter feed items by keyword in title or description. This is an essential feature for users with many subscriptions to find specific content.

**Implementation Details:**

1. **New InputMode:** Added `InputMode::Searching` to handle search text input
2. **New App fields:**
   - `search_query: String` - stores the current search query
   - `filtered_indices: Option<Vec<usize>>` - stores indices of matching items when filter is active
3. **New App methods:**
   - `start_search()` - enters search mode
   - `cancel_search()` - cancels search and clears filter
   - `confirm_search()` - confirms search, keeps filter active
   - `update_search_filter()` - updates filtered indices based on query
   - `clear_search()` - clears filter when pressing Esc in normal mode
   - `get_visible_items()` - returns filtered or all items based on filter state
   - `visible_item_count()` - returns count of visible items
   - `get_actual_index()` - converts visible index to actual index in feed content

4. **Key bindings:**
   - `/` - Start search mode (in FeedList and Favorites views)
   - `Enter` - Confirm search and keep filter active
   - `Esc` - Cancel search (clears filter), or clear active filter in normal mode

5. **UI Updates:**
   - Command bar shows search input with cursor during search mode
   - Title bar shows filter indicator when filter is active: `[Filter: "query"]`
   - Shows filtered item count vs total: "Items 1-5/5 of 50"
   - Help menu updated with search documentation

6. **Modified existing methods to work with filtered indices:**
   - `select_previous()`, `select_next()` - navigate filtered list
   - `open_selected_feed()` - uses actual index
   - `toggle_read_status()` - uses actual index
   - `mark_as_read()` - uses actual index
   - `mark_all_as_read()` - marks only visible (filtered) items
   - `toggle_favorite()` - uses actual index, handles filter index updates

**Files changed:**
- `src/app.rs` - Added search state, methods, and updated existing methods
- `src/handler.rs` - Added search mode key handling and `/` key binding
- `src/ui.rs` - Updated rendering to show filtered items and search UI
- `tests/app_tests.rs` - Added 3 new tests for search functionality

**Tests:** All tests pass (20 total: 15 app tests, 5 ui tests)

---

### Implemented: High Priority Feature #2 - Feed Export/Import via Clipboard

**Location:** `src/app.rs`, `src/handler.rs`, `src/ui.rs`

**Description:** Added the ability to export and import feed subscriptions via the system clipboard. This allows users to easily backup, share, or migrate their feed subscriptions.

**Implementation Details:**

1. **New Dependency:** Added `arboard` crate (v3, default-features disabled) for cross-platform clipboard access

2. **New InputMode:** Added `InputMode::Importing` to handle multi-line URL input

3. **New App field:**
   - `import_result: Option<String>` - stores the result message from import operation

4. **New App methods:**
   - `export_feeds_to_clipboard()` - copies all feed URLs to clipboard, one per line
   - `start_importing()` - enters import mode, pre-fills input buffer with clipboard content
   - `cancel_importing()` - cancels import mode and clears state
   - `import_feeds()` - validates and imports feeds from input buffer

5. **Key bindings (in Feed Manager mode):**
   - `e` - Export all feed URLs to clipboard
   - `i` - Start import mode (clipboard content auto-pasted)
   - `Enter` - Confirm import and validate URLs
   - `Esc` - Cancel import

6. **Import behavior:**
   - Parses input buffer as one URL per line
   - Validates each URL as a valid RSS/Atom feed
   - Skips duplicate URLs already in the feed list
   - Shows summary message: "Import: X added, Y duplicate, Z invalid"

7. **UI Updates:**
   - Command bar shows export/import options: `[e] Export  [i] Import`
   - Import mode shows URL count: "Import feeds (X URLs pasted) - [Enter] Import  [Esc] Cancel"
   - Help menu updated with export/import documentation

**Files changed:**
- `Cargo.toml` - Added `arboard` dependency
- `src/app.rs` - Added `InputMode::Importing`, `import_result` field, and export/import methods
- `src/handler.rs` - Added `e` and `i` key bindings, `Importing` input mode handler
- `src/ui.rs` - Updated command bar and help menu with export/import documentation
- `tests/app_tests.rs` - Added 3 new tests for import functionality

**Tests:** All tests pass (23 total: 18 app tests, 5 ui tests)

---

### Implemented: High Priority Feature #4 - Feed Title Display

**Location:** `src/app.rs`, `src/ui.rs`

**Description:** Extract and display the actual feed title instead of showing the raw URL. This provides much better UX as users can identify feeds at a glance.

**Implementation Details:**

1. **New Data Structure:** Added `FeedInfo` struct with `url` and `title` fields to store feed subscriptions:
   ```rust
   pub struct FeedInfo {
       pub url: String,
       pub title: String,
   }
   ```

2. **Changed `rss_feeds` type:** From `Vec<String>` to `Vec<FeedInfo>`

3. **Updated `SavedState`:** Now persists `Vec<FeedInfo>` instead of `Vec<String>`

4. **New validation function:** Renamed `is_valid_rss_feed()` to `validate_and_get_feed_title()` which returns `Option<String>` containing the feed title on success

5. **Title extraction:** When adding a feed (manually or via import), the feed title is extracted from:
   - RSS: `channel.title()`
   - Atom: `feed.title().value`
   - Falls back to URL if title is empty

6. **Backwards compatibility:** Added migration logic in `load_feeds()` to handle:
   - New format: `Vec<FeedInfo>` with titles
   - Middle format: `Vec<String>` with favorites
   - Old format: `Vec<String>` without favorites
   - Old formats are converted by using the URL as the initial title

7. **UI updates:**
   - Feed Manager now displays feed titles instead of raw URLs
   - Feed items show "Item Title | Feed Title" instead of "Item Title | URL"

8. **Updated helper functions:**
   - `convert_rss_items()` and `convert_atom_items()` now take `feed_title` parameter
   - All methods iterating over `rss_feeds` updated to use `FeedInfo` fields

**Files changed:**
- `src/app.rs` - Added `FeedInfo` struct, updated `SavedState`, `App`, validation, add/import functions, and all feed iteration code
- `src/ui.rs` - Updated `render_feed_manager()` to display feed titles

**Tests:** All tests pass (23 total: 18 app tests, 5 ui tests)

---

### Implemented: High Priority Feature #5 - Unread Count per Feed

**Location:** `src/app.rs`, `src/ui.rs`

**Description:** Added the ability to display unread item counts for each feed in the Feed Manager. This helps users quickly identify which feeds have new content without needing to open each feed individually.

**Implementation Details:**

1. **New FeedItem field:** Added `feed_url: String` field to `FeedItem` struct with `#[serde(default)]` for backwards compatibility with existing cache data.

2. **Updated FeedItem creation:** All places that create `FeedItem` instances now set the `feed_url` field:
   - `convert_rss_items()` function
   - `convert_atom_items()` function
   - Inline creation in `load_feed_content()` for both RSS and Atom feeds

3. **New App methods:**
   - `count_unread_for_feed(url: &str) -> usize` - Returns count of unread items for a feed by loading from cache
   - `count_total_for_feed(url: &str) -> usize` - Returns total item count for a feed

4. **UI Updates in Feed Manager:**
   - Each feed now displays: "Feed Title (unread/total)" e.g., "Tech News (3/10)"
   - Unread counts are styled with cyan color and bold when there are unread items
   - Count appears in dark gray when all items are read
   - No count shown if feed has no cached content yet
   - Title width dynamically adjusted to account for count display

**Files changed:**
- `src/app.rs` - Added `feed_url` field to `FeedItem`, added count methods, updated all FeedItem creation sites
- `src/ui.rs` - Updated `render_feed_manager()` to display unread/total counts
- `tests/app_tests.rs` - Updated all test FeedItem creations to include `feed_url` field

**Tests:** All tests pass (23 total: 18 app tests, 5 ui tests)

---

### Implemented: High Priority Feature #6 - Configurable HTTP Timeout

**Location:** `src/app.rs`

**Description:** Added a configuration system that allows users to customize the HTTP request timeout. This prevents the application from hanging indefinitely when connecting to slow or unresponsive feed servers.

**Implementation Details:**

1. **New Config struct:** Added `Config` struct with `http_timeout_secs` field:
   ```rust
   pub struct Config {
       pub http_timeout_secs: u64, // default: 30
   }
   ```

2. **Configuration file:** Config is stored at `~/.config/reedy/config.json` alongside the existing `feeds.json`

3. **New App methods:**
   - `get_config_path()` - Returns the path to config.json
   - `load_config()` - Loads config from file or returns defaults if not found
   - `save_config()` - Saves current config to file

4. **Updated HTTP client creation:** Modified `create_http_client()` to accept timeout as parameter instead of using a constant

5. **Updated all HTTP request call sites:**
   - `validate_and_get_feed_title()` - Now takes timeout parameter
   - `load_feed_content()` - Uses `self.config.http_timeout_secs`
   - `cache_all_feeds()` - Uses `self.config.http_timeout_secs`
   - `refresh_all_feeds()` - Uses `self.config.http_timeout_secs`
   - `fetch_feed()` - Public API now accepts optional timeout parameter

6. **Config persistence:** Config is loaded at app startup and stored in the App struct

7. **Backwards compatibility:**
   - If config.json doesn't exist, default values are used
   - The `#[serde(default)]` attribute ensures missing fields use defaults
   - `fetch_feed()` accepts `Option<u64>` for timeout, using default if None

**Example config.json:**
```json
{
  "http_timeout_secs": 30
}
```

**Files changed:**
- `src/app.rs` - Added `Config` struct, config methods, `config` field to `App`, updated all HTTP client calls

**Tests:** All tests pass (23 total: 18 app tests, 5 ui tests)

---

### Implemented: Medium Priority Feature #7 - Feed Categories/Tags

**Location:** `src/app.rs`, `src/handler.rs`, `src/ui.rs`

**Description:** Added the ability to organize feeds into custom categories. This helps users with many subscriptions to better organize and navigate their feed list.

**Implementation Details:**

1. **Updated FeedInfo struct:** Added optional `category` field with `#[serde(default)]` for backwards compatibility:
   ```rust
   pub struct FeedInfo {
       pub url: String,
       pub title: String,
       #[serde(default)]
       pub category: Option<String>,
   }
   ```

2. **New InputMode:** Added `InputMode::SettingCategory` to handle category text input

3. **New App methods:**
   - `start_setting_category()` - enters category setting mode, pre-fills with existing category
   - `cancel_setting_category()` - cancels without saving changes
   - `set_category()` - saves the category (or clears it if empty)
   - `get_categories()` - returns sorted list of unique categories
   - `get_feeds_by_category()` - returns feeds grouped by category

4. **Key bindings (in Feed Manager mode):**
   - `t` - Start category setting mode for selected feed
   - `Enter` - Save the category
   - `Esc` - Cancel category setting

5. **UI Updates in Feed Manager:**
   - Feeds are now displayed grouped by category with section headers
   - Section headers use magenta color and bold formatting: "── Category Name ──"
   - Uncategorized feeds appear first under "── Uncategorized ──"
   - Categories are sorted alphabetically
   - Feeds within each category maintain their original order
   - Command bar shows `[t] Tag/Category` option
   - Help menu updated with category documentation

6. **Backwards compatibility:**
   - Existing saved state files work without modification
   - The `#[serde(default)]` attribute ensures missing category fields default to `None`
   - All FeedInfo creation sites updated to include `category: None`

**Files changed:**
- `src/app.rs` - Added `category` field to `FeedInfo`, new `InputMode::SettingCategory`, category management methods
- `src/handler.rs` - Added `t` key binding, `SettingCategory` input mode handler
- `src/ui.rs` - Updated `render_feed_manager()` to display grouped feeds, updated command bar and help menu
- `tests/app_tests.rs` - Added 6 new tests for category functionality

**Tests:** All tests pass (29 total: 24 app tests, 5 ui tests)

---

### Fixed: Low Bug #11 - Silent Error Handling

**Location:** `src/app.rs` - `load_feeds()` and `load_config()` functions

**Problem:** Some errors were silently ignored, making debugging difficult:
1. When loading the feeds file (`feeds.json`), if all three format parsing attempts (new, middle, old) failed, the app silently continued with empty feeds. Users had no idea their file was corrupted or malformed.
2. When loading the config file (`config.json`), if the file existed but couldn't be read or parsed, the app silently used defaults without informing the user.

**Solution:**
1. **`load_feeds()` (line ~386)**: Added error handling for the case when all parsing formats fail. Now:
   - Logs an error message with the file path
   - Sets `self.error_message` to display a warning to the user about potential file corruption

2. **`load_config()` (lines 217-241)**: Rewrote using match expressions instead of nested `if let Ok()`. Now:
   - Logs a warning with the specific error when file reading fails
   - Logs a warning with the parse error when JSON parsing fails
   - Still returns default config, but user is informed via log output

3. **Added `warn` macro import**: Added `warn` to the log imports for the new warning messages.

**Files changed:**
- `src/app.rs` - Added error reporting in `load_feeds()`, improved error logging in `load_config()`, added `warn` to imports

**Tests:** All tests pass (29 total: 24 app tests, 5 ui tests)

---

### Implemented: Medium Priority Feature #8 - Auto-Refresh Interval

**Location:** `src/app.rs`, `src/main.rs`, `src/handler.rs`, `src/ui.rs`

**Description:** Added the ability to automatically refresh feeds at a configurable interval. This allows users to see new content without having to manually refresh, making the app more convenient for continuous monitoring of feeds.

**Implementation Details:**

1. **Updated Config struct:** Added `auto_refresh_mins` field with `#[serde(default)]` for backwards compatibility:
   ```rust
   pub struct Config {
       pub http_timeout_secs: u64,
       pub auto_refresh_mins: u64, // default: 0 (disabled)
   }
   ```

2. **New App fields:**
   - `last_refresh: Option<SystemTime>` - Tracks when feeds were last refreshed
   - `auto_refresh_pending: bool` - Flag set by tick() when refresh is due

3. **Updated App methods:**
   - `tick()` - Now checks if auto-refresh interval has elapsed and sets the pending flag
   - `perform_auto_refresh()` - New async method that executes the refresh when pending
   - `time_until_next_refresh()` - Returns duration until next auto-refresh for UI display

4. **Main loop integration:**
   - The tick event now calls both `tick()` and `perform_auto_refresh().await`
   - This allows the auto-refresh to execute asynchronously without blocking

5. **Manual refresh integration:**
   - When user presses `c` to refresh, `last_refresh` is updated to reset the timer

6. **UI Updates:**
   - Title bar shows auto-refresh countdown when enabled: `[Auto: M:SS]`
   - Format shows minutes and seconds remaining until next refresh

7. **Smart refresh behavior:**
   - Only refreshes in FeedList or Favorites mode
   - Skips refresh during input modes (Adding, Searching, Importing, etc.)
   - In Favorites mode, re-filters content after refresh to maintain view

**Example config.json:**
```json
{
  "http_timeout_secs": 30,
  "auto_refresh_mins": 5
}
```

**Files changed:**
- `src/app.rs` - Added `auto_refresh_mins` to Config, `last_refresh` and `auto_refresh_pending` to App, implemented tick(), perform_auto_refresh(), and time_until_next_refresh()
- `src/main.rs` - Updated tick event handler to call perform_auto_refresh()
- `src/handler.rs` - Updated manual refresh handler to reset last_refresh timer
- `src/ui.rs` - Added auto-refresh countdown display to title bar

**Tests:** All tests pass (29 total: 24 app tests, 5 ui tests)

